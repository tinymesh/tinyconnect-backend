{channels, [
   #{
      <<"channel">> => <<"USB Stick and MQTT">>,
      <<"plugins">> => [
         #{
            <<"name">>     => <<"tty2">>,
            <<"plugin">>   => <<"tinyconnect_tty2">>,
            <<"pipeline">> => [<<"parallel">>, [<<"serial">>, <<"#deframe">>, <<"mqtt">>]],
            <<"path">>     => <<"/dev/ttyUSB0">>,
            <<"options">>  => #{
               <<"baud">> => 19200,
               <<"flow_control">> => <<"none">>
            }
         },

         #{
            <<"name">> => <<"#deframe">>,
            <<"plugin">> => <<"tinyconnect_preload:deframe">>
         },

         #{
            <<"name">> => <<"mqtt">>,
            <<"plugin">> => <<"tinyconnect_mqtt">>,
            <<"pipeline">> => [<<"parallel">>, <<"tty2">>],
            <<"opts">> => [
               "::1",
               {client_id, <<"tinyconnect">>},
               {reconnect, 3},
               {logger, {console, info}}
            ],
            <<"subscribe">> => [ <<"1A/1e8-mf7-297o-c5s/command">> ],
            <<"publish">>   => [ <<"1A/1e8-mf7-297o-c5s/event">> ]
         }
      ]
   }
]}.
